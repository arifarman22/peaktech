{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../components/Navbar.tsx","../../../../app/products/%5Bslug%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/lib/contexts/AuthContext';\r\nimport { useState } from 'react';\r\n\r\nexport default function Navbar() {\r\n    const { user, logout } = useAuth();\r\n    const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n\r\n    return (\r\n        <nav className=\"bg-white shadow-md sticky top-0 z-50\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"flex justify-between items-center h-16\">\r\n                    {/* Logo */}\r\n                    <Link href=\"/\" className=\"flex items-center space-x-2\">\r\n                        <div className=\"w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center\">\r\n                            <span className=\"text-white font-bold text-xl\">P</span>\r\n                        </div>\r\n                        <span className=\"text-xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent\">\r\n                            PeakTech\r\n                        </span>\r\n                    </Link>\r\n\r\n                    {/* Desktop Navigation */}\r\n                    <div className=\"hidden md:flex items-center space-x-8\">\r\n                        <Link href=\"/shop\" className=\"text-gray-700 hover:text-purple-600 transition\">\r\n                            Shop\r\n                        </Link>\r\n                        {user ? (\r\n                            <>\r\n                                <Link href=\"/orders\" className=\"text-gray-700 hover:text-purple-600 transition\">\r\n                                    Orders\r\n                                </Link>\r\n                                <Link href=\"/cart\" className=\"text-gray-700 hover:text-purple-600 transition\">\r\n                                    Cart\r\n                                </Link>\r\n                                {user.role === 'admin' && (\r\n                                    <Link href=\"/admin\" className=\"text-gray-700 hover:text-purple-600 transition\">\r\n                                        Admin\r\n                                    </Link>\r\n                                )}\r\n                                <button\r\n                                    onClick={() => logout()}\r\n                                    className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition\"\r\n                                >\r\n                                    Logout\r\n                                </button>\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <Link\r\n                                    href=\"/login\"\r\n                                    className=\"px-4 py-2 text-purple-600 hover:text-purple-700 transition\"\r\n                                >\r\n                                    Login\r\n                                </Link>\r\n                                <Link\r\n                                    href=\"/register\"\r\n                                    className=\"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition\"\r\n                                >\r\n                                    Sign Up\r\n                                </Link>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Mobile Menu Button */}\r\n                    <button\r\n                        className=\"md:hidden p-2\"\r\n                        onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n                    >\r\n                        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Mobile Menu */}\r\n                {mobileMenuOpen && (\r\n                    <div className=\"md:hidden py-4 border-t\">\r\n                        <Link href=\"/shop\" className=\"block py-2 text-gray-700 hover:text-purple-600\">\r\n                            Shop\r\n                        </Link>\r\n                        {user ? (\r\n                            <>\r\n                                <Link href=\"/orders\" className=\"block py-2 text-gray-700 hover:text-purple-600\">\r\n                                    Orders\r\n                                </Link>\r\n                                <Link href=\"/cart\" className=\"block py-2 text-gray-700 hover:text-purple-600\">\r\n                                    Cart\r\n                                </Link>\r\n                                {user.role === 'admin' && (\r\n                                    <Link href=\"/admin\" className=\"block py-2 text-gray-700 hover:text-purple-600\">\r\n                                        Admin\r\n                                    </Link>\r\n                                )}\r\n                                <button\r\n                                    onClick={() => logout()}\r\n                                    className=\"mt-2 w-full text-left py-2 text-gray-700 hover:text-purple-600\"\r\n                                >\r\n                                    Logout\r\n                                </button>\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <Link href=\"/login\" className=\"block py-2 text-gray-700 hover:text-purple-600\">\r\n                                    Login\r\n                                </Link>\r\n                                <Link href=\"/register\" className=\"block py-2 text-gray-700 hover:text-purple-600\">\r\n                                    Sign Up\r\n                                </Link>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/lib/contexts/AuthContext';\r\nimport Navbar from '@/components/Navbar';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface Product {\r\n    _id: string;\r\n    name: string;\r\n    slug: string;\r\n    description: string;\r\n    price: number;\r\n    compareAtPrice?: number;\r\n    images: string[];\r\n    category: { name: string; slug: string };\r\n    quantity: number;\r\n}\r\n\r\nexport default function ProductDetailPage() {\r\n    const params = useParams();\r\n    const router = useRouter();\r\n    const { user } = useAuth();\r\n    const [product, setProduct] = useState<Product | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [quantity, setQuantity] = useState(1);\r\n    const [addingToCart, setAddingToCart] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (params.slug) {\r\n            fetchProduct();\r\n        }\r\n    }, [params.slug]);\r\n\r\n    const fetchProduct = async () => {\r\n        try {\r\n            const res = await fetch(`/api/products/${params.slug}`);\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                setProduct(data.data);\r\n            } else {\r\n                toast.error(data.error || 'Product not found');\r\n                router.push('/shop');\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to fetch product:', error);\r\n            toast.error('Failed to load product');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const addToCart = async () => {\r\n        if (!user) {\r\n            toast.error('Please login to add items to cart');\r\n            router.push('/login');\r\n            return;\r\n        }\r\n\r\n        setAddingToCart(true);\r\n        try {\r\n            const res = await fetch('/api/cart', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ productId: product?._id, quantity }),\r\n            });\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                toast.success('Added to cart!');\r\n            } else {\r\n                toast.error(data.error || 'Failed to add to cart');\r\n            }\r\n        } catch (error) {\r\n            toast.error('Something went wrong');\r\n        } finally {\r\n            setAddingToCart(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"min-h-screen bg-gray-50\"><Navbar /><div className=\"flex items-center justify-center p-20 text-xl\">Loading...</div></div>;\r\n    if (!product) return null;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <Navbar />\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n                <div className=\"bg-white rounded-3xl shadow-xl overflow-hidden grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                    {/* Image Gallery */}\r\n                    <div className=\"p-8 bg-gray-100 flex items-center justify-center min-h-[400px]\">\r\n                        {product.images.length > 0 ? (\r\n                            <img src={product.images[0]} alt={product.name} className=\"max-w-full max-h-full object-contain mix-blend-multiply\" />\r\n                        ) : (\r\n                            <div className=\"text-8xl\">ðŸ“¦</div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Product Details */}\r\n                    <div className=\"p-8 md:p-12 flex flex-col justify-center\">\r\n                        <div className=\"mb-4\">\r\n                            <span className=\"px-3 py-1 bg-purple-100 text-purple-600 rounded-full text-sm font-semibold uppercase tracking-wider\">\r\n                                {product.category.name}\r\n                            </span>\r\n                        </div>\r\n                        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">{product.name}</h1>\r\n                        <div className=\"flex items-center gap-4 mb-6\">\r\n                            <span className=\"text-3xl font-bold text-purple-600\">${product.price.toFixed(2)}</span>\r\n                            {product.compareAtPrice && product.compareAtPrice > product.price && (\r\n                                <span className=\"text-xl text-gray-500 line-through\">${product.compareAtPrice.toFixed(2)}</span>\r\n                            )}\r\n                        </div>\r\n\r\n                        <p className=\"text-gray-600 mb-8 leading-relaxed\">{product.description}</p>\r\n\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"flex items-center gap-6\">\r\n                                <div className=\"flex items-center border border-gray-300 rounded-xl overflow-hidden shadow-sm\">\r\n                                    <button\r\n                                        onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                                        className=\"p-3 hover:bg-gray-100 transition px-5 text-xl\"\r\n                                    >-</button>\r\n                                    <span className=\"px-6 font-bold text-lg\">{quantity}</span>\r\n                                    <button\r\n                                        onClick={() => setQuantity(Math.min(product.quantity, quantity + 1))}\r\n                                        className=\"p-3 hover:bg-gray-100 transition px-5 text-xl\"\r\n                                    >+</button>\r\n                                </div>\r\n                                <span className=\"text-sm text-gray-500 font-medium\">\r\n                                    {product.quantity} units available\r\n                                </span>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={addToCart}\r\n                                disabled={addingToCart || product.quantity === 0}\r\n                                className=\"w-full md:w-auto px-12 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-2xl font-bold text-lg hover:shadow-xl hover:scale-[1.02] transition active:scale-[0.98] disabled:opacity-50\"\r\n                            >\r\n                                {product.quantity === 0 ? 'Out of Stock' : addingToCart ? 'Adding...' : 'Add to Cart'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0]}